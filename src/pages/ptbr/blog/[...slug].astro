---

import BlogPost from '../../../layouts/BlogPost.astro'
import { getAllPosts } from '../../../lib/cosmic'

export async function getStaticPaths() {
  const data = (await getAllPosts()) || []

  return data.map((post: { slug: any }) => {
    return {
      params: { slug: post.slug },
      props: { post }
    }
  })
}

const props: {
	post: {
		title: string;
		metadata: {
			author: {
				title: string;
			};
			cover_image: {
				imgix_url: string;
			};
			content: string;
		};
    
	}
} = Astro.props

const post = {
  data: {
    title: props.post.title,
    description: props.post.metadata.content,
    pubDate: new Date(),
    heroImage: props.post.metadata.cover_image.imgix_url
  }
}
---
<BlogPost {...post.data}>
  <div set:html={props.post.metadata.content} />
</BlogPost>